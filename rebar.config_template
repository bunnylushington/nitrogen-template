%% -*- mode: erlang -*-
{erl_opts, [debug_info, fail_on_warning]}.

{deps, [ 
         {cowboy,   "1.1.2"}
       , {simple_bridge,       {git, "git://github.com/nitrogen/simple_bridge",       {ref, "cc4213b"}}} 
       , {nprocreg,            {git, "git://github.com/nitrogen/nprocreg",            {tag, "v0.2.1"}}}
       , {nitrogen_core,       {git, "git://github.com/nitrogen/nitrogen_core",       {ref, "27761e9"}}}
       , {simple_cache,        {git, "git://github.com/nitrogen/simple_cache",        {branch, master}}}
       , {sync,                {git, "git://github.com/rustyio/sync",                 {ref, "6e9d730"}}}  
]}.

{post_hooks, [{compile, "cp -r  _build/default/lib/nitrogen_core/www/* priv/static/nitrogen"}]}.

{relx, [{release, { {{name}}, "0.1.0"},
         [{{name}}, cowboy, sasl, syntax_tools, compiler]},
        {overlay, [{copy, "priv/static", "static"},
                   {mkdir, "config"},
                   {template, "config/vm.args", "vm.args"},
                   {template, "config/{{name}}.config", "config/{{name}}.config"},
                   {template, "config/simple_bridge.config", "config/simple_bridge.config"},
                   {template, "config/sync.config", "config/sync.config"}]},
        {sys_config, "./config/simple_bridge.config"},
        {vm_args, "./config/vm.args"},
        {dev_mode, true},
        {include_erts, false},
        {extended_start_script, true}]
}.

